<html>
<head>
    <meta charset="utf-8">
    <title>Theory of Browser Evolution</title>
    <link href="assets/css/bootstrap.min.css" rel="stylesheet">
    <script src="assets/js/purify.min.js"></script>
</head>

<body>
<div class="container">
    <h1>Theory of Browser Evolution</h1>
    <p class="lead">Betcha you can't steal my cookie, n00b.</p>
</div>
<div id="injection"></div>
</body>

<script>
    var nuclearSanitizer = function (dirty) {
        var clean = dirty;

        forbiddenWords = ["onerror", "onload", "onunload", "img", "focus"];
        
        for (const fw of forbiddenWords) {
            if (dirty.toLowerCase().includes(fw)) {
                console.log(fw);
                clean = "";
                break;
            }
        }

        return clean;
    }
    
    var getUrlParam = function (name) {
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
        var r = unescape(window.location.search.substr(1)).match(reg);
        if (r != null) return r[2];
        return null;
    }

    var layout = getUrlParam("layout");
    var clean = DOMPurify.sanitize(layout);
    
    // Hehe I made a custom sanitizer, no worriez
    clean = nuclearSanitizer(clean);

    var injectionPoint = document.getElementById("injection");
    injectionPoint.innerHTML = clean;
    injectionPoint.innerHTML = injectionPoint.innerHTML;
</script>
</html>
